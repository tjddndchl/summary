## **JSP/Servlet의 웹 저장 메커니즘**

### **1. 쿠키 (Cookie)**

**정의**: 
- 클라이언트의 웹 브라우저에 저장되는 작은 텍스트 파일. 웹 서버가 사용자의 브라우저에 전송하고, 후속 요청 시 다시 서버로 전송됩니다.

**특징**: 
- 사용자의 웹 브라우저에 저장됩니다.
- 사용자의 환경 설정, 로그인 상태 유지 등에 사용됩니다.
- 크기(대략 4KB)와 수명이 제한적입니다.

### **2. 애플리케이션 (Application 또는 Servlet Context)**

**정의**: 
- 웹 애플리케이션의 모든 부분에서 공유될 수 있는 데이터를 저장하는 공간.

**특징**: 
- 웹 애플리케이션 시작 시 생성되며 종료될 때까지 유지됩니다.
- 모든 사용자와 세션 간에 공유됩니다.
- 전체 애플리케이션에 대한 설정이나 데이터에 사용됩니다.

### **3. 요청 (Request)**

**정의**: 
- HTTP 요청에 대한 정보와 기능을 포함하는 객체.

**특징**: 
- HTTP 요청 시마다 생성되고 처리 후 소멸됩니다.
- 요청에 포함된 데이터(파라미터, 헤더 등)를 저장하고 처리하는 데 사용됩니다.

### **4. 세션 (Session)**

**정의**: 
- 특정 사용자의 요청 간 상태 정보를 유지하기 위한 저장 메커니즘.

**특징**: 
- 서버 측에 저장됩니다.
- 사용자의 세션 시작(보통 첫 요청 시)시 생성되며, 세션이 무효화되거나 시간이 초과될 때까지 유지됩니다.
- 사용자 정보, 장바구니 항목 등 사용자 특정 데이터 저장에 사용됩니다.
- 자동으로 무효화되는 시간 제한이 있습니다(설정 가능).


## **JSP `session` 객체**

### **설명**:

- `session` 객체는 클라이언트와 웹 서버 간의 상태 정보를 유지하기 위해 사용됩니다.
- 각각의 클라이언트(브라우저)에 대해 고유한 세션 ID가 생성되며, 이 ID를 통해 서버는 클라이언트를 식별합니다.
- `session` 객체는 `HttpSession` 인터페이스를 구현하는 객체입니다.
- 웹 애플리케이션의 여러 페이지에서 정보를 공유할 수 있습니다.

### **기본 예제**:

```jsp
// 세션에 값 저장하기
session.setAttribute("username", "john_doe");

// 세션에서 값 가져오기
String username = (String) session.getAttribute("username");

// 세션에서 값 제거하기
session.removeAttribute("username");
```

## **로그인 세션 관리 방법**:

1. 사용자가 로그인 시, 사용자 정보를 세션에 저장합니다.
2. 페이지 접근 시 마다 해당 정보를 체크하여 로그인 상태를 확인합니다.
3. 사용자가 로그아웃하거나 세션이 만료될 경우, 세션에서 사용자 정보를 제거합니다.

### **예제**:
```jsp
// 로그인 성공 시
session.setAttribute("loggedInUser", userObject);

// 페이지 접근 시
if(session.getAttribute("loggedInUser") == null) {
    // 사용자가 로그인하지 않았거나 세션이 만료된 경우
    response.sendRedirect("login.jsp");
}

// 로그아웃 시
session.invalidate();
```

## **로그인 후 10분 후에 세션을 종료하는 방법**:

1. 사용자가 로그인할 때, 세션의 만료 시간을 10분으로 설정합니다.

### **예제**:
```jsp
// 로그인 성공 시
session.setAttribute("loggedInUser", userObject);
session.setMaxInactiveInterval(10 * 60); // 10분 (시간은 초 단위로 설정됨)
```

- 이 방법을 사용하면 사용자가 마지막 요청(예: 페이지 로드, AJAX 요청 등)으로부터 10분 후에 세션이 자동으로 만료됩니다. 사용자가 계속 활동을 하면 세션의 타이머는 재설정되어 추가로 10분 동안 유지됩니다.
---

**요약**:

- **저장 위치**:
  - `쿠키`: 클라이언트 측.
  - `애플리케이션`: 서버 측.
  - `요청`: 서버 측.
  - `세션`: 서버 측.
  
- **수명**:
  - `쿠키`: 설정 가능하며, 장기적으로 유지될 수 있습니다.
  - `애플리케이션`: 애플리케이션 시작부터 종료까지.
  - `요청`: 단일 HTTP 요청 동안만.
  - `세션`: 생성부터 시간 초과나 무효화까지.
  
- **범위**:
  - `쿠키`: 동일 도메인의 모든 요청에 사용 가능.
  - `애플리케이션`: 애플리케이션 내 모든 세션과 사용자에게 공유됨.
  - `요청`: 현재 HTTP 요청에만 해당.
  - `세션`: 사용자의 세션에 특정.

## 포워딩 (Forwarding) vs 리다이렉트 (Redirect)

### 서블릿에서의 포워딩과 리다이렉트

#### **1. 포워딩 (Forwarding)**
- **설명**: 현재의 요청을 다른 자원(서블릿, JSP 페이지 등)에 전달하여 그 자원의 실행 결과를 클라이언트에게 반환합니다. URL은 변경되지 않습니다.

**예제**:
```java
RequestDispatcher dispatcher = request.getRequestDispatcher("/targetServlet");
dispatcher.forward(request, response);
```

#### **2. 리다이렉트 (Redirect)**
- **설명**: 클라이언트에게 새로운 URL로의 요청을 지시하는 응답을 전송합니다. 이로 인해 클라이언트는 지정된 URL로 새로운 요청을 보냅니다. URL이 변경됩니다.

**예제**:
```java
response.sendRedirect("/newURL");
```

### JSP에서의 포워딩과 리다이렉트

#### **1. 포워딩 (Forwarding)**
- **설명**: 현재의 JSP 페이지에서 다른 페이지나 서블릿으로 처리를 전달합니다. URL은 변경되지 않습니다.

**예제**:
```jsp
<jsp:forward page="/targetPage.jsp" />
```

#### **2. 리다이렉트 (Redirect)**
- **설명**: 현재의 JSP 페이지에서 클라이언트에게 새로운 URL로의 요청을 지시하는 응답을 전송합니다. URL이 변경됩니다.

**예제**:
```jsp
<%
    response.sendRedirect("/newURL.jsp");
%>
```

### 차이점

- **포워딩**:
  - URL이 변경되지 않습니다.
  - 요청이 서버 내에서만 전달되므로 클라이언트는 포워딩이 발생했는지 알 수 없습니다.
  - 요청과 응답 객체가 그대로 유지됩니다.
  
- **리다이렉트**:
  - URL이 변경됩니다.
  - 클라이언트에게 새 URL로의 요청을 지시하는 응답이 전송되므로 클라이언트가 새 URL로 다시 요청을 보냅니다.
  - 새로운 요청이 발생하므로 요청과 응답 객체가 새로 생성됩니다.




